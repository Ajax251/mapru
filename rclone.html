<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π Rclone</title>
    <link id="favicon" rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚òÅÔ∏è</text></svg>">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(170deg, #e8f4fd 0%, #d1e9f6 30%, #f0f4ff 60%, #fafcff 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before, body::after {
            content: '';
            position: fixed;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            z-index: 0;
            pointer-events: none;
        }
        body::before {
            width: 500px; height: 200px;
            top: -60px; left: -80px;
            border-radius: 100px;
            background: rgba(255,255,255,0.55);
            box-shadow: 120px 30px 0 40px rgba(255,255,255,0.4), 260px 10px 0 60px rgba(255,255,255,0.35);
        }
        body::after {
            width: 400px; height: 160px;
            bottom: -40px; right: -60px;
            border-radius: 100px;
            background: rgba(255,255,255,0.45);
            box-shadow: -100px -20px 0 50px rgba(255,255,255,0.3), -240px 10px 0 30px rgba(255,255,255,0.25);
        }

        .wizard {
            width: 100%;
            max-width: 780px;
            background: rgba(255,255,255,0.92);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 24px;
            box-shadow: 0 8px 40px rgba(140,170,210,0.2), 0 1px 3px rgba(140,170,210,0.1);
            overflow: hidden;
            color: #334155;
            position: relative;
            z-index: 1;
            border: 1px solid rgba(200,220,240,0.5);
        }

        .wizard-header {
            background: linear-gradient(135deg, #4a9eed 0%, #6cb8f7 50%, #89c8fa 100%);
            padding: 26px 32px 20px;
            position: relative;
            overflow: hidden;
        }
        .wizard-header::before {
            content: '';
            position: absolute;
            top: -30px; right: -20px;
            width: 180px; height: 80px;
            border-radius: 60px;
            background: rgba(255,255,255,0.18);
        }
        .wizard-header::after {
            content: '';
            position: absolute;
            bottom: -20px; left: 40%;
            width: 140px; height: 60px;
            border-radius: 50px;
            background: rgba(255,255,255,0.12);
        }
        .wizard-header h1 {
            font-size: 21px;
            font-weight: 700;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            z-index: 1;
            text-shadow: 0 1px 3px rgba(0,80,160,0.2);
        }
        .wizard-header p {
            margin-top: 5px;
            font-size: 13px;
            color: rgba(255,255,255,.85);
            position: relative;
            z-index: 1;
        }

        .progress-bar {
            display: flex;
            padding: 0 32px;
            background: #f6f9fc;
            border-bottom: 1px solid #e8eff6;
        }
        .progress-step {
            flex: 1;
            text-align: center;
            padding: 14px 4px;
            font-size: 12px;
            font-weight: 600;
            color: #a0aec0;
            position: relative;
            cursor: default;
            transition: color .3s;
        }
        .progress-step.active { color: #4a9eed; }
        .progress-step.done { color: #38b2ac; }
        .progress-step::after {
            content: '';
            position: absolute;
            bottom: 0; left: 20%; right: 20%;
            height: 3px;
            border-radius: 3px 3px 0 0;
            background: transparent;
            transition: background .3s;
        }
        .progress-step.active::after { background: #4a9eed; }
        .progress-step.done::after { background: #38b2ac; }
        .step-num {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 22px; height: 22px;
            border-radius: 50%;
            background: #e2e8f0;
            font-size: 11px;
            margin-right: 5px;
            vertical-align: middle;
            transition: background .3s, color .3s;
            color: #718096;
        }
        .progress-step.active .step-num { background: #4a9eed; color: #fff; }
        .progress-step.done .step-num { background: #38b2ac; color: #fff; }

        .wizard-body {
            padding: 28px 32px 12px;
            min-height: 380px;
        }

        .step { display: none; animation: fadeIn .35s; }
        .step.visible { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: none; } }

        .step-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 6px;
            color: #1e293b;
        }
        .step-subtitle {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 22px;
            line-height: 1.5;
        }

        .card-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .card-grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        
        

        @media(max-width:650px){
            .card-grid, .card-grid-3 { grid-template-columns: 1fr; }
        }

        .option-card {
            background: #fff;
            border: 2px solid #e2e8f0;
            border-radius: 14px;
            padding: 16px;
            cursor: pointer;
            transition: border-color .2s, background .2s, transform .15s, box-shadow .2s;
            position: relative;
        }
        .option-card:hover { background: #f0f7ff; border-color: #90c4f0; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(74,158,237,0.1); }
        .option-card.selected { border-color: #4a9eed; background: #eef6fd; box-shadow: 0 4px 16px rgba(74,158,237,0.15); }
        .option-card .card-icon { font-size: 28px; margin-bottom: 8px; }
        .option-card .card-title { font-weight: 700; font-size: 14px; margin-bottom: 4px; color: #1e293b; }
        .option-card .card-desc { font-size: 12px; color: #64748b; line-height: 1.45; }
        .option-card .card-badge {
            position: absolute;
            top: 10px; right: 10px;
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 20px;
            font-weight: 700;
        }
        .badge-safe { background: #e2e8f0; color: #475569; }
        .badge-warn { background: #fed7aa; color: #9a3412; }
        .badge-info { background: #dbeafe; color: #1e40af; }
        .badge-fast { background: #e0e7ff; color: #3730a3; }
        .badge-important { background: #fee2e2; color: #991b1b; }
        .badge-huge { background: #f0f9ff; color: #0c4a6e; }

        .field { margin-bottom: 18px; }
        .field label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: #475569;
            margin-bottom: 6px;
        }
        .field input[type="text"], .field input[type="number"] {
            width: 100%;
            padding: 11px 14px;
            background: #fff;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            color: #1e293b;
            font-size: 14px;
            transition: border-color .2s, box-shadow .2s;
        }
        .field input[type="text"]:focus, .field input[type="number"]:focus { outline: none; border-color: #4a9eed; box-shadow: 0 0 0 3px rgba(74,158,237,0.15); }
        .field input[type="text"]::placeholder { color: #a0aec0; }
        .field input[type="number"] { font-family: monospace; }
        .field .hint {
            margin-top: 5px;
            font-size: 12px;
            color: #94a3b8;
            line-height: 1.4;
        }
        .field .hint code {
            background: #f1f5f9;
            padding: 1px 5px;
            border-radius: 4px;
            font-size: 11px;
            color: #4a9eed;
            border: 1px solid #e2e8f0;
        }

        .check-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        @media(max-width:650px){ .check-grid { grid-template-columns: 1fr; } }

        .check-item {
            display: flex; align-items: flex-start; gap: 12px;
            background: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 10px 14px;
            cursor: pointer;
            transition: border-color .2s, background .2s, box-shadow .2s;
        }
        .check-item:hover { border-color: #90c4f0; background: #f8fbfe; box-shadow: 0 2px 8px rgba(74,158,237,0.08); }
        .check-item input[type="checkbox"] {
            margin-top: 2px;
            width: 18px; height: 18px;
            accent-color: #4a9eed;
            flex-shrink: 0;
            cursor: pointer;
        }
        .check-item .ci-title { font-weight: 600; font-size: 13px; color: #1e293b; }
        .check-item .ci-desc { font-size: 11px; color: #64748b; margin-top: 2px; line-height: 1.35; }
        
                .check-item.attention {
            background: #fffdf4;
            border-color: #fde68a;
        }
        .check-item.attention:hover {
            background: #fffbeb;
            border-color: #fbbf24;
            box-shadow: 0 2px 8px rgba(245,158,11,0.12);
        }
        .check-item.attention input[type="checkbox"] { accent-color: #d97706; }
        .check-item.attention .ci-title { color: #92400e; }
        .check-item.attention .ci-desc { color: #b45309; }

        .info-panel {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px 18px;
            margin-bottom: 14px;
        }
        .info-panel.blue { background: #f0f7ff; border-color: #c9dff5; }
        .info-panel.green { background: #ecfdf5; border-color: #a7f3d0; }
        .info-panel.warn { background: #fef3e2; border-color: #fcd9a8; }
        .info-panel.red { background: #fef2f2; border-color: #fecaca; }
        .info-panel h4 {
            font-size: 14px;
            color: #475569;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .info-panel.blue h4 { color: #2563eb; }
        .info-panel.green h4 { color: #059669; }
        .info-panel.warn h4 { color: #d97706; }
        .info-panel.red h4 { color: #dc2626; }
        .info-panel ol, .info-panel ul {
            margin-left: 18px;
            font-size: 13px;
            color: #475569;
            line-height: 1.7;
        }
        .info-panel ol li::marker { color: #94a3b8; font-weight: 700; }
        .info-panel.blue ol li::marker { color: #4a9eed; font-weight: 700; }
        .info-panel.green ol li::marker { color: #10b981; }
        .info-panel code {
            background: #f1f5f9;
            padding: 1px 6px;
            border-radius: 4px;
            font-size: 12px;
            color: #475569;
            border: 1px solid #e2e8f0;
        }
        .info-panel.blue code {
            background: #e8f0fd;
            color: #3b82f6;
            border-color: #c9dff5;
        }
        .info-panel.green code {
            background: #d1fae5;
            color: #047857;
            border-color: #a7f3d0;
        }
        .info-panel .cmd-block {
            background: #1e293b;
            border-radius: 8px;
            padding: 8px 12px;
            margin: 6px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #34d399;
            border-left: 3px solid #64748b;
            user-select: all;
        }
        .info-panel a { color: #3b82f6; text-decoration: underline; text-decoration-style: dotted; }

        .guide-toggle {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #fff;
            border: 1px solid #d1dce8;
            border-radius: 10px;
            padding: 8px 14px;
            color: #4a9eed;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 14px;
            transition: background .2s, border-color .2s, box-shadow .2s;
        }
        .guide-toggle:hover { background: #f0f7ff; border-color: #90c4f0; box-shadow: 0 2px 8px rgba(74,158,237,0.1); }
        .guide-content { display: none; animation: fadeIn .3s; }
        .guide-content.open { display: block; }

        .preview-box {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 18px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.7;
            color: #34d399;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 320px;
            overflow-y: auto;
        }
        .preview-box::-webkit-scrollbar { width: 6px; }
        .preview-box::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }

        .summary-table { width: 100%; margin-bottom: 18px; }
        .summary-table tr { border-bottom: 1px solid #f1f5f9; }
        .summary-table td { padding: 8px 0; font-size: 13px; vertical-align: top; }
        .summary-table .s-label { color: #94a3b8; width: 130px; font-weight: 600; }
        .summary-table .s-value { color: #1e293b; font-weight: 500; }

        .wizard-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 32px 24px;
        }

        .nav-btn {
            padding: 11px 28px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: transform .15s, box-shadow .2s, background .2s;
        }
        .nav-btn:active { transform: scale(.97); }
        .btn-back { background: #f1f5f9; color: #64748b; border: 1px solid #e2e8f0; }
        .btn-back:hover { background: #e2e8f0; color: #334155; }
        .btn-next { background: linear-gradient(135deg, #4a9eed, #60b0f4); color: #fff; box-shadow: 0 4px 14px rgba(74,158,237,0.3); }
        .btn-next:hover { box-shadow: 0 6px 20px rgba(74,158,237,0.4); transform: translateY(-1px); }
        .btn-next:disabled { opacity: .4; cursor: not-allowed; transform: none; box-shadow: none; }

        .btn-action {
            padding: 11px 22px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: transform .15s, box-shadow .2s;
        }
        .btn-action:active { transform: scale(.97); }
        .btn-copy { background: #f59e0b; color: #fff; box-shadow: 0 3px 10px rgba(245,158,11,0.25); }
        .btn-copy:hover { box-shadow: 0 4px 15px rgba(245,158,11,0.4); }
        .btn-download { background: #10b981; color: #fff; box-shadow: 0 3px 10px rgba(16,185,129,0.25); }
        .btn-download:hover { box-shadow: 0 4px 15px rgba(16,185,129,0.4); }

        .final-actions { display: flex; gap: 10px; flex-wrap: wrap; }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(80px);
            background: #10b981;
            color: #fff;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            opacity: 0;
            transition: transform .35s, opacity .35s;
            z-index: 999;
            pointer-events: none;
            box-shadow: 0 6px 20px rgba(16,185,129,0.35);
        }
        .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

        .dir-arrow { font-size: 32px; text-align: center; margin-bottom: 4px; }

        @media(max-width:560px){
            .wizard-body { padding: 20px 18px 8px; }
            .wizard-footer { padding: 12px 18px 20px; }
            .wizard-header { padding: 20px 18px 16px; }
            .progress-bar { padding: 0 10px; }
            .progress-step { font-size: 10px; padding: 10px 2px; }
            .final-actions { flex-direction: column; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-6px); }
            40%, 80% { transform: translateX(6px); }
        }
        
        .section-label {
            font-size:13px; font-weight:600; color:#64748b; margin: 18px 0 8px; display:block;
            border-bottom: 1px dashed #cbd5e1; padding-bottom: 4px;
        }
    </style>
</head>
<body>

<div class="wizard">
    <div class="wizard-header">
        <h1>‚òÅÔ∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Rclone</h1>
        <p>–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª–µ–π –∏ —Å—Ä–µ–¥</p>
    </div>

    <div class="progress-bar" id="progressBar">
        <div class="progress-step active" data-i="0"><span class="step-num">1</span>–°—Ä–µ–¥–∞</div>
        <div class="progress-step" data-i="1"><span class="step-num">2</span>–ü—É—Ç–∏</div>
        <div class="progress-step" data-i="2"><span class="step-num">3</span>–†–µ–∂–∏–º</div>
        <div class="progress-step" data-i="3"><span class="step-num">4</span>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</div>
        <div class="progress-step" data-i="4"><span class="step-num">5</span>–ò—Ç–æ–≥</div>
    </div>

    <div class="wizard-body" id="wizardBody">

        <!-- STEP 0 -->
        <div class="step visible" data-step="0">
            <div class="step-title">–í—ã–±–æ—Ä —Ü–µ–ª–µ–≤–æ–π —Å—Ä–µ–¥—ã</div>
            <div class="step-subtitle">–£–∫–∞–∂–∏—Ç–µ —Ç–∏–ø —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ Rclone.</div>

            <div class="card-grid">
                <div class="option-card" data-name="storageType" data-val="local" onclick="selectCard(this)">
                    <div class="card-icon">üíæ</div>
                    <div class="card-title">–ú–∞–≥–Ω–∏—Ç–Ω—ã–µ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª–∏ (HDD) / –°–µ—Ç—å</div>
                    <div class="card-desc">–õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∏—Å–∫–∏ –∏ —Å–µ—Ç–µ–≤—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (SMB/NFS)</div>
                    <div class="card-badge badge-safe">–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è I/O</div>
                </div>
                <div class="option-card" data-name="storageType" data-val="huge" onclick="selectCard(this)">
                    <div class="card-icon">üèóÔ∏è</div>
                    <div class="card-title">–ú–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö (100k+ —Ñ–∞–π–ª–æ–≤)</div>
                    <div class="card-desc">–î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –º–µ–ª–∫–∏—Ö —Ñ–∞–π–ª–æ–≤</div>
                    <div class="card-badge badge-huge">–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏</div>
                </div>
                <div class="option-card" data-name="storageType" data-val="cloud" onclick="selectCard(this)">
                    <div class="card-icon">‚òÅÔ∏è</div>
                    <div class="card-title">–û–±–ª–∞—á–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞</div>
                    <div class="card-desc">S3, Google Drive, –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫, Dropbox –∏ –∞–Ω–∞–ª–æ–≥–∏</div>
                </div>
                <div class="option-card" data-name="storageType" data-val="ssd" onclick="selectCard(this)">
                    <div class="card-icon">‚ö°</div>
                    <div class="card-title">–¢–≤–µ—Ä–¥–æ—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª–∏ (SSD)</div>
                    <div class="card-desc">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ö—Ä–∞–Ω–∏–ª–∏—â —Å –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é</div>
                    <div class="card-badge badge-fast">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
                </div>
            </div>

            <div class="info-panel" style="margin-top: 18px;">
                <h4>‚ÑπÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</h4>
                <ol>
                    <li><strong>HDD / –°–µ—Ç–µ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã:</strong> –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ (I/O).</li>
                    <li><strong>–ú–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö:</strong> –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –¥–µ–ª—å—Ç (–∏–∑–º–µ–Ω–µ–Ω–∏–π) –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É.</li>
                    <li><strong>SSD / NVMe:</strong> –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.</li>
                    <li><strong>Cloud:</strong> –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ API-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞.</li>
                </ol>
            </div>

            <div id="cloudGuideWrap" style="display: none;">
                <button type="button" class="guide-toggle" onclick="toggleGuide('cloudGuide', this)">üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Remote)</button>
                <div class="guide-content" id="cloudGuide">
                    <div class="info-panel blue">
                        <h4>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫)</h4>
                        <ol>
                            <li>–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (Terminal/CMD) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:</li>
                        </ol>
                        <div class="cmd-block">rclone config</div>
                        <ol start="2">
                            <li>–í–≤–µ–¥–∏—Ç–µ <code>n</code> –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (New remote).</li>
                            <li>–£–∫–∞–∂–∏—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, <code>yandex</code>).</li>
                            <li>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ (<strong>Yandex Disk</strong>).</li>
                            <li>–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ OAuth —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä.</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 1 -->
        <div class="step" data-step="1">
            <div class="step-title">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π</div>
            <div class="step-subtitle" id="step1Subtitle">–£–∫–∞–∂–∏—Ç–µ –ø—É—Ç–∏ –∫ –∏—Å—Ö–æ–¥–Ω–æ–π –∏ —Ü–µ–ª–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º.</div>

            <div class="field">
                <label>üìÅ –ò—Å—Ö–æ–¥–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (–õ–æ–∫–∞–ª—å–Ω–∞—è)</label>
                <input type="text" id="localPath" placeholder="D:\Data\Documents">
                <div class="hint">–ü—Ä–∏–º–µ—Ä –ø—É—Ç–∏: <code>C:\Users\Username\Documents</code>, <code>/mnt/data/backup</code></div>
            </div>

            <div id="cloudFields" style="display:none;">
                <div class="field">
                    <label>üè∑Ô∏è –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (Remote Name)</label>
                    <input type="text" id="remoteName" placeholder="mycloud" value="mycloud">
                    <div class="hint">–ò–º—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∑–∞–¥–∞–Ω–Ω–æ–µ –∫–æ–º–∞–Ω–¥–æ–π <code>rclone config</code></div>
                </div>
                <div class="field">
                    <label>üìÇ –ü—É—Ç—å –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (Remote Path)</label>
                    <input type="text" id="remotePath" placeholder="/" value="/">
                    <div class="hint">–û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: <code>/</code>. –ü—Ä–∏–º–µ—Ä –≤–ª–æ–∂–µ–Ω–Ω–æ–π: <code>/Backups/2026</code></div>
                </div>
            </div>

            <div id="localDestField">
                <div class="field">
                    <label>üìÅ –¶–µ–ª–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (–õ–æ–∫–∞–ª—å–Ω–∞—è/–°–µ—Ç–µ–≤–∞—è)</label>
                    <input type="text" id="localDestPath" placeholder="\\server\share\backup">
                    <div class="hint">–ü—Ä–∏–º–µ—Ä –ø—É—Ç–∏: <code>\\192.168.1.10\backup</code>, <code>E:\Archive</code></div>
                </div>
            </div>

            <div class="info-panel" style="margin-top:16px;">
                <h4>‚ÑπÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ --fast-list</h4>
                <ul>
                    <li>–ü–∞—Ä–∞–º–µ—Ç—Ä <code>--fast-list</code> –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å (RAM).</li>
                    <li>–î–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â —Å –¥–µ—Å—è—Ç–∫–∞–º–∏ —Ç—ã—Å—è—á —Ñ–∞–π–ª–æ–≤ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ–º—É –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é –ø–∞–º—è—Ç–∏.</li>
                    <li>–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞: –¥–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –æ–±–ª–∞—á–Ω—ã—Ö —Å—Ä–µ–¥, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π API.</li>
                </ul>
            </div>
        </div>

        <!-- STEP 2 -->
        <div class="step" data-step="2">
            <div class="step-title">–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã</div>
            <div class="step-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.</div>

            <div style="margin-bottom:16px;">
                <div class="card-grid">
                    <div class="option-card selected" data-name="operation" data-val="copy" onclick="selectCard(this)">
                        <span class="card-badge badge-safe">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π</span>
                        <div class="card-icon">üìÑ</div>
                        <div class="card-title">–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (Copy)</div>
                        <div class="card-desc">–ü–µ—Ä–µ–Ω–æ—Å –Ω–æ–≤—ã—Ö –∏ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤. –î–∞–Ω–Ω—ã–µ –≤ —Ü–µ–ª–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è.</div>
                    </div>
                    <div class="option-card" data-name="operation" data-val="sync" onclick="selectCard(this)">
                        <span class="card-badge badge-warn">–¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è</span>
                        <div class="card-icon">üîÅ</div>
                        <div class="card-title">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (Sync)</div>
                        <div class="card-desc">–°—Ç—Ä–æ–≥–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—É. –§–∞–π–ª—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ, –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–∑ —Ü–µ–ª–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.</div>
                    </div>
                </div>
            </div>

            <div id="directionBlock">
                <span class="section-label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö</span>
                <div class="card-grid" id="directionCards">
                    <div class="option-card selected" data-name="direction" data-val="upload" onclick="selectCard(this)">
                        <div class="dir-arrow">‚û°Ô∏è</div>
                        <div class="card-title" id="dirUploadTitle">–ò—Å—Ç–æ—á–Ω–∏–∫ A ‚Üí –¶–µ–ª—å B</div>
                        <div class="card-desc">–ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö</div>
                    </div>
                    <div class="option-card" data-name="direction" data-val="download" onclick="selectCard(this)">
                        <div class="dir-arrow">‚¨ÖÔ∏è</div>
                        <div class="card-title" id="dirDownloadTitle">–¶–µ–ª—å B ‚Üí –ò—Å—Ç–æ—á–Ω–∏–∫ A</div>
                        <div class="card-desc">–û–±—Ä–∞—Ç–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (Restore)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 3 -->
        <div class="step" data-step="3">
            <div class="step-title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</div>
            <div class="step-subtitle" id="optSubtitle">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∏–ø —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.</div>

            <div id="perfPreview" class="info-panel blue">
                <h4>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è</h4>
                <div id="perfDetails">–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–∞–±–æ—Ç—ã Rclone.</div>
            </div>

            <span class="section-label" style="margin-top:0;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏ –∏ –ª–∏–º–∏—Ç–∞–º–∏</span>
            <div class="card-grid-3">
                <div class="field">
                    <label>–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—á–∏ (--transfers)</label>
                    <input type="number" id="optTransfers" min="1" max="128" value="4">
                    <div class="hint">–ü–æ—Ç–æ–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.</div>
                </div>
                <div class="field">
                    <label>–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è (--checkers)</label>
                    <input type="number" id="optCheckers" min="1" max="256" value="8">
                    <div class="hint">–ü–æ—Ç–æ–∫–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.</div>
                </div>
                              <div class="field">
                    <label>–õ–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ (--bwlimit)</label>
                    <input type="number" id="bwLimit" placeholder="–ü—Ä–∏–º–µ—Ä: 50" min="1">
                    <div class="hint">–£–∫–∞–∂–∏—Ç–µ –∫–≤–æ—Ç—É —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤ –º–µ–≥–∞–±–∞–π—Ç–∞—Ö (–ú–ë/—Å).</div>
                </div>
            </div>

            <span class="section-label" style="margin-top:0;">–ö–ª—é—á–µ–≤—ã–µ —Ñ–ª–∞–≥–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞</span>
            <div class="check-grid">
                <label class="check-item">
                    <input type="checkbox" id="optUpdate" checked>
                    <div>
                        <div class="ci-title">–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å (--update)</div>
                        <div class="ci-desc">–ò—Å–∫–ª—é—á–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–æ–≤–µ–µ –≤ —Ü–µ–ª–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.</div>
                    </div>
                </label>
                
                                <label class="check-item attention">
                    <input type="checkbox" id="optIgnoreExisting">
                    <div>
                        <div class="ci-title">–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ (--ignore-existing)</div>
                        <div class="ci-desc">–ü—Ä–æ–ø—É—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é –∏–º–µ–Ω–∏ (–±–µ–∑ —Å–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –∏–ª–∏ –¥–∞—Ç—ã). –¢–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤.</div>
                    </div>
                </label>
                
                <label class="check-item">
                    <input type="checkbox" id="optFastList">
                    <div>
                        <div class="ci-title">–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (--fast-list)</div>
                        <div class="ci-desc">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è API-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –æ–±–ª–∞—á–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º.</div>
                    </div>
                </label>
                <label class="check-item">
                    <input type="checkbox" id="optNoModTime" checked>
                    <div>
                        <div class="ci-title">–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ (--no-update-modtime)</div>
                        <div class="ci-desc">–°–Ω–∏–∂–∞–µ—Ç –ª–∏—à–Ω—é—é I/O –Ω–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏.</div>
                    </div>
                </label>
                <label class="check-item">
                    <input type="checkbox" id="optChecksum">
                    <div>
                        <div class="ci-title">–°–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Å—É–º–º (--checksum)</div>
                        <div class="ci-desc">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –æ–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è).</div>
                    </div>
                </label>
                <label class="check-item">
                    <input type="checkbox" id="optProgress" checked>
                    <div>
                        <div class="ci-title">–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (-P)</div>
                        <div class="ci-desc">–í—ã–≤–æ–¥ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.</div>
                    </div>
                </label>
                <label class="check-item">
                    <input type="checkbox" id="optVerbose">
                    <div>
                        <div class="ci-title">–ñ—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π (-v)</div>
                        <div class="ci-desc">–ü–æ–¥—Ä–æ–±–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤ (Info) –¥–ª—è –±–∞–∑–æ–≤–æ–π –æ—Ç–ª–∞–¥–∫–∏.</div>
                    </div>
                </label>
                <label class="check-item">
                    <input type="checkbox" id="optDryRun">
                    <div>
                        <div class="ci-title">–¢–µ—Å—Ç–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (--dry-run)</div>
                        <div class="ci-desc">–†–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏. –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω—ã –Ω–µ –±—É–¥—É—Ç.</div>
                    </div>
                </label>
                <label class="check-item">
                    <input type="checkbox" id="optPause" checked>
                    <div>
                        <div class="ci-title">–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (pause)</div>
                        <div class="ci-desc">–ü—Ä–µ–ø—è—Ç—Å—Ç–≤—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –∑–∞–∫—Ä—ã—Ç–∏—é –æ–∫–Ω–∞ –∫–æ–Ω—Å–æ–ª–∏.</div>
                    </div>
                </label>
            </div>
            
            <span class="section-label">–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</span>
            <div class="field">
                <label>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (Custom Flags)</label>
                <input type="text" id="extraFlags" placeholder="--exclude *.tmp --exclude .git">
                <div class="hint">–£–∫–∞–∑–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ rclone</div>
            </div>
        </div>

        <!-- STEP 4 -->
        <div class="step" data-step="4">
            <div class="step-title">‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞</div>
            <div class="step-subtitle">–ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Å–∫—Ä–∏–ø—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.</div>

            <table class="summary-table" id="summaryTable">
                <tr><td class="s-label">–ü—Ä–æ—Ñ–∏–ª—å —Å—Ä–µ–¥—ã</td><td class="s-value" id="sumType"></td></tr>
                <tr><td class="s-label">–ò—Å—Ç–æ—á–Ω–∏–∫</td><td class="s-value" id="sumSource"></td></tr>
                <tr><td class="s-label">–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</td><td class="s-value" id="sumDest"></td></tr>
                <tr><td class="s-label">–û–ø–µ—Ä–∞—Ü–∏—è</td><td class="s-value" id="sumMode"></td></tr>
                <tr><td class="s-label">–§–ª–∞–≥–∏ CLI</td><td class="s-value" id="sumOpts" style="font-family:monospace; font-size:12px; line-height:1.5;"></td></tr>
            </table>

            <div class="preview-box" id="previewBox"></div>

            <div class="final-actions" style="margin-top: 16px;">
                <button class="btn-action btn-copy" onclick="copyCode()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
                <button class="btn-action btn-download" onclick="downloadBat()">üíæ –°–∫–∞—á–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π (.bat)</button>
            </div>

            <div class="info-panel blue" style="margin-top:18px;">
                <h4>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h4>
                <ol id="usageTips">
                    <li>–°–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –≤ —Å—Ä–µ–¥–µ Windows.</li>
                    <li>–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º –∑–∞–¥–∞–Ω–∏–π Windows (Task Scheduler).</li>
                    <li>–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ –Ω–∞ ¬´–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é¬ª –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º <code>--dry-run</code>.</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="wizard-footer">
        <button class="nav-btn btn-back" id="btnBack" onclick="goStep(-1)" style="visibility:hidden;">‚Üê –ù–∞–∑–∞–¥</button>
        <button class="nav-btn btn-next" id="btnNext" onclick="goStep(1)">–î–∞–ª–µ–µ ‚Üí</button>
    </div>
</div>

<div class="toast" id="toast">–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞</div>

<script>
    let currentStep = 0;
    const totalSteps = 5;

    let choices = {
        storageType: 'local',
        operation: 'copy',
        direction: 'upload'
    };

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º
    function applyScenarioOptimization(type) {
        const fastList = document.getElementById('optFastList');
        const noModTime = document.getElementById('optNoModTime');
        const update = document.getElementById('optUpdate');
        const checksum = document.getElementById('optChecksum');
        
                const ignoreExisting = document.getElementById('optIgnoreExisting');
        
        const transfersInput = document.getElementById('optTransfers');
        const checkersInput = document.getElementById('optCheckers');
        
        const perfPreview = document.getElementById('perfPreview');
        const perfDetails = document.getElementById('perfDetails');
        const optSubtitle = document.getElementById('optSubtitle');
        const usageTips = document.getElementById('usageTips');

        // –ë–∞–∑–æ–≤—ã–π —Å–±—Ä–æ—Å
        fastList.checked = false;
        noModTime.checked = false;
        checksum.checked = false;
        update.checked = true;
                ignoreExisting.checked = false;
        perfPreview.className = 'info-panel blue';

        switch(type) {
            case 'local':
                noModTime.checked = true;
                fastList.checked = false;
                transfersInput.value = 2;
                checkersInput.value = 4;
                perfDetails.innerHTML = `
                    <strong>–ü—Ä–æ—Ñ–∏–ª—å: –ú–∞–≥–Ω–∏—Ç–Ω—ã–µ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª–∏ (HDD) / –°–µ—Ç—å</strong><br>
                    ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤ (Transfers/Checkers) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∏–∑–Ω–æ—Å–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ I/O<br>
                    ‚Ä¢ –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã --fast-list (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RAM)<br>
                    ‚Ä¢ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–∑–ª–∏—à–Ω–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤—Ä–µ–º–µ–Ω–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Å–Ω–∏–∂–µ–Ω–∏–µ I/O)
                `;
                optSubtitle.textContent = '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –º–µ—Ö–∞–Ω–∏–∫—É –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è.';
                break;

            case 'huge':
                noModTime.checked = true;
                fastList.checked = false;
                transfersInput.value = 2;
                checkersInput.value = 4;
                perfDetails.innerHTML = `
                    <strong>–ü—Ä–æ—Ñ–∏–ª—å: –ú–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö (100k+ —Ñ–∞–π–ª–æ–≤)</strong><br>
                    ‚Ä¢ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã —Ñ–ª–∞–≥–∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è (<code>--update</code>, <code>--no-update-modtime</code>)<br>
                    ‚Ä¢ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (<code>--fast-list</code>) –æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏<br>
                    ‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ (Transfers/Checkers) —Å–Ω–∏–∂–µ–Ω–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
                `;
                optSubtitle.textContent = '–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏.';
                break;

            case 'ssd':
                noModTime.checked = false;
                fastList.checked = false;
                transfersInput.value = 8;
                checkersInput.value = 16;
                perfDetails.innerHTML = `
                    <strong>–ü—Ä–æ—Ñ–∏–ª—å: –¢–≤–µ—Ä–¥–æ—Ç–µ–ª—å–Ω—ã–π –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å (NVMe/SSD)</strong><br>
                    ‚Ä¢ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ (Transfers/Checkers)<br>
                    ‚Ä¢ –°–Ω—è—Ç–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º I/O<br>
                    ‚Ä¢ –£–ø–æ—Ä –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —à–∏–Ω—ã –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
                `;
                optSubtitle.textContent = '–†–µ–∂–∏–º –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –±—ã—Å—Ç—Ä—ã—Ö –Ω–∞–∫–æ–ø–∏—Ç–µ–ª–µ–π.';
                perfPreview.className = 'info-panel green';
                break;

            case 'cloud':
                noModTime.checked = false;
                fastList.checked = true;
                transfersInput.value = 4;
                checkersInput.value = 8;
                perfDetails.innerHTML = `
                    <strong>–ü—Ä–æ—Ñ–∏–ª—å: –û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ</strong><br>
                    ‚Ä¢ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –∫—ç—à–∏—Ä—É—é—â–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (<code>--fast-list</code>)<br>
                    ‚Ä¢ –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (API Calls)<br>
                    ‚Ä¢ –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ (Transfers/Checkers) –ø–æ–¥ –ª–∏–º–∏—Ç—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
                `;
                optSubtitle.textContent = '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ API.';
                perfPreview.className = 'info-panel blue';
                break;
        }
    }

    /* --- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ LocalStorage --- */
    function saveState() {
        const state = {
            choices: choices,
            inputs: {
                localPath: document.getElementById('localPath').value,
                remoteName: document.getElementById('remoteName').value,
                remotePath: document.getElementById('remotePath').value,
                localDestPath: document.getElementById('localDestPath').value,
                extraFlags: document.getElementById('extraFlags').value,
                bwLimit: document.getElementById('bwLimit').value,
                optTransfers: document.getElementById('optTransfers').value,
                optCheckers: document.getElementById('optCheckers').value
            },
            checkboxes: {
                optDryRun: document.getElementById('optDryRun').checked,
                optProgress: document.getElementById('optProgress').checked,
                optVerbose: document.getElementById('optVerbose').checked,
                optUpdate: document.getElementById('optUpdate').checked,
                optPause: document.getElementById('optPause').checked,
                optFastList: document.getElementById('optFastList').checked,
                             optNoModTime: document.getElementById('optNoModTime').checked,
                optChecksum: document.getElementById('optChecksum').checked,
                optIgnoreExisting: document.getElementById('optIgnoreExisting').checked
            }
        };
        localStorage.setItem('rcloneWizardConfig', JSON.stringify(state));
    }

    function loadState() {
        const saved = localStorage.getItem('rcloneWizardConfig');
        if (!saved) return;
        
        try {
            const state = JSON.parse(saved);
            
            if (state.choices) {
                choices = state.choices;
                document.querySelectorAll('.option-card').forEach(card => {
                    const name = card.dataset.name;
                    if (choices[name] === card.dataset.val) {
                        card.classList.add('selected');
                    } else {
                        card.classList.remove('selected');
                    }
                });
            }

            // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–∏–º–µ–Ω—è–µ–º –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—Ñ–∏–ª—è
            applyScenarioOptimization(choices.storageType);

            // –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
            if (state.inputs) {
                for (const [id, val] of Object.entries(state.inputs)) {
                    const el = document.getElementById(id);
                    if (el) el.value = val;
                }
            }

            if (state.checkboxes) {
                for (const [id, val] of Object.entries(state.checkboxes)) {
                    const el = document.getElementById(id);
                    if (el) el.checked = val;
                }
            }

        } catch (e) {
            console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤', e);
        }
    }

    /* --- –°–ª—É—à–∞—Ç–µ–ª–∏ --- */
    document.querySelectorAll('input[type="text"], input[type="number"]').forEach(el => {
        el.addEventListener('input', saveState);
    });
      document.querySelectorAll('input[type="checkbox"]').forEach(el => {
        el.addEventListener('change', function() {
            // –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –ø—Ä–æ–ø—É—Å–∫–∞
            if (this.id === 'optIgnoreExisting' && this.checked) {
                document.getElementById('optUpdate').checked = false;
                document.getElementById('optNoModTime').checked = false;
            } else if ((this.id === 'optUpdate' || this.id === 'optNoModTime') && this.checked) {
                document.getElementById('optIgnoreExisting').checked = false;
            }
            saveState();
        });
    });

    /* --- Helpers --- */
    function cleanPath(p) {
        return p.replace(/\\+$/, '');
    }

    function selectCard(el) {
        const name = el.dataset.name;
        const val = el.dataset.val;
        choices[name] = val;
        
        el.parentElement.querySelectorAll(`.option-card[data-name="${name}"]`).forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        
        if (name === 'storageType') {
            updateStorageUI();
            applyScenarioOptimization(val);
        }
        
        saveState();
    }

    function updateStorageUI() {
        const isCloud = choices.storageType === 'cloud';
        document.getElementById('cloudFields').style.display = isCloud ? '' : 'none';
        document.getElementById('localDestField').style.display = isCloud ? 'none' : '';
        document.getElementById('cloudGuideWrap').style.display = isCloud ? '' : 'none';
        document.getElementById('dirUploadTitle').textContent = isCloud ? '–õ–æ–∫–∞–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è ‚Üí Cloud' : '–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è A ‚Üí –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è B';
        document.getElementById('dirDownloadTitle').textContent = isCloud ? 'Cloud ‚Üí –õ–æ–∫–∞–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è' : '–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è B ‚Üí –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è A';
    }

    function toggleGuide(id, btn) {
        const el = document.getElementById(id);
        const open = el.classList.toggle('open');
        btn.textContent = open ? '–°–∫—Ä—ã—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ' : 'üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Remote)';
    }

    function goStep(dir) {
        if (dir === 1 && !validateStep(currentStep)) return;
        currentStep += dir;
        if (currentStep < 0) currentStep = 0;
        if (currentStep >= totalSteps) currentStep = totalSteps - 1;
        if (currentStep === totalSteps - 1) buildPreview();
        renderStep();
    }

    function renderStep() {
        document.querySelectorAll('.step').forEach(s => s.classList.remove('visible'));
        document.querySelector(`.step[data-step="${currentStep}"]`).classList.add('visible');
        document.querySelectorAll('.progress-step').forEach(s => {
            const i = +s.dataset.i;
            s.classList.remove('active', 'done');
            if (i === currentStep) s.classList.add('active');
            else if (i < currentStep) s.classList.add('done');
        });
        document.getElementById('btnBack').style.visibility = currentStep === 0 ? 'hidden' : 'visible';
        document.getElementById('btnNext').style.display = currentStep === totalSteps - 1 ? 'none' : '';
    }

    function validateStep(step) {
        if (step === 1) {
            if (!document.getElementById('localPath').value.trim()) { shake('localPath'); return false; }
            if (choices.storageType === 'cloud') {
                if (!document.getElementById('remoteName').value.trim()) { shake('remoteName'); return false; }
            } else {
                if (!document.getElementById('localDestPath').value.trim()) { shake('localDestPath'); return false; }
            }
        }
        return true;
    }

    function shake(id) {
        const el = document.getElementById(id);
        el.style.borderColor = '#ef4444';
        el.style.animation = 'none';
        el.offsetHeight;
        el.style.animation = 'shake .4s';
        el.focus();
        setTimeout(() => el.style.borderColor = '', 1500);
    }

    function buildPreview() {
        const type = choices.storageType;
        const localPath = cleanPath(document.getElementById('localPath').value.trim());
        const op = choices.operation;
        const dir = choices.direction;

        let target;
        if (type === 'cloud') {
            const rn = document.getElementById('remoteName').value.trim() || 'mycloud';
            const rp = document.getElementById('remotePath').value.trim() || '/';
            target = rn + ':' + rp;
        } else {
            target = '"' + cleanPath(document.getElementById('localDestPath').value.trim()) + '"';
        }

        let source, dest;
        if (dir === 'upload') {
            source = '"' + localPath + '"';
            dest = target;
        } else {
            source = target;
            dest = '"' + localPath + '"';
        }

        let flags = [];
        
        // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤ –∏–∑ UI –≤–º–µ—Å—Ç–æ —Å–∫—Ä—ã—Ç–æ–π –ª–æ–≥–∏–∫–∏
        const transfers = document.getElementById('optTransfers').value.trim();
        const checkers = document.getElementById('optCheckers').value.trim();
        
        if (transfers) flags.push('--transfers=' + transfers);
        if (checkers) flags.push('--checkers=' + checkers);

        if (document.getElementById('optProgress').checked) flags.push('-P');
        if (document.getElementById('optVerbose').checked) flags.push('-v');
        
             if (document.getElementById('optDryRun').checked) flags.push('--dry-run');
        
      
        if (document.getElementById('optIgnoreExisting').checked) {
            flags.push('--ignore-existing');
        } else {
            if (document.getElementById('optUpdate').checked) flags.push('--update');
            if (document.getElementById('optNoModTime').checked) flags.push('--no-update-modtime');
        }
        
        if (document.getElementById('optFastList').checked) flags.push('--fast-list');
        if (document.getElementById('optChecksum').checked) flags.push('--checksum');
                
        
             let bwLim = document.getElementById('bwLimit').value.trim();
        if (bwLim) {
            flags.push('--bwlimit=' + bwLim + 'M');
        }

        const extra = document.getElementById('extraFlags').value.trim();
        if (extra) flags.push(extra);

        const pause = document.getElementById('optPause').checked;

        let bat = '@echo off\r\n';
        bat += 'chcp 65001 >nul\r\n';
        bat += '\r\n';
        
        const scenarioNames = {
            'local': '–ü—Ä–æ—Ñ–∏–ª—å: –õ–æ–∫–∞–ª—å–Ω—ã–µ/—Å–µ—Ç–µ–≤—ã–µ –¥–∏—Å–∫–∏ (HDD)',
            'huge': '–ü—Ä–æ—Ñ–∏–ª—å: –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Å—Å–∏–≤–∞ –¥–∞–Ω–Ω—ã—Ö (100k+)',
            'ssd': '–ü—Ä–æ—Ñ–∏–ª—å: –¢–≤–µ—Ä–¥–æ—Ç–µ–ª—å–Ω—ã–π –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å (NVMe/SSD)',
            'cloud': '–ü—Ä–æ—Ñ–∏–ª—å: –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –æ–±–ª–∞—á–Ω—ã–º API'
        };
        
        bat += 'echo [System] Rclone initialization procedure started.\r\n';
        bat += 'echo [Profile] ' + (scenarioNames[type] || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è') + '\r\n';
        bat += 'echo.\r\n';
        bat += '\r\n';
        bat += 'rclone ' + op + ' ' + source + ' ' + dest;
        if (flags.length) bat += ' ' + flags.join(' ');
        bat += '\r\n';
        bat += '\r\n';
        bat += 'echo.\r\n';
        bat += 'echo [Task] Execution completed.\r\n';
        if (pause) bat += '\r\npause\r\n';

        document.getElementById('previewBox').textContent = bat;

        const typeNames = { local: '–ú–∞–≥–Ω–∏—Ç–Ω—ã–π –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å (HDD)', huge: '–ú–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö (Huge)', cloud: '–û–±–ª–∞—á–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞', ssd: '–í—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π I/O (SSD)' };
        const modeNames = { copy: '–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (Copy)', sync: '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (Sync)' };
        
        document.getElementById('sumType').textContent = typeNames[type] || type;
        document.getElementById('sumSource').textContent = dir === 'upload' ? localPath : (type === 'cloud' ? target : target.replace(/"/g, ''));
        document.getElementById('sumDest').textContent = dir === 'upload' ? (type === 'cloud' ? target : target.replace(/"/g, '')) : localPath;
        document.getElementById('sumMode').textContent = modeNames[op] || op;
        document.getElementById('sumOpts').textContent = flags.length ? flags.join(' ') : '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è';
    }

    function downloadBat() {
        const code = getCode();
        if (!code) return;

        const blob = new Blob(["\uFEFF" + code], { type: 'text/plain;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'rclone_config.bat';
        document.body.appendChild(a);
        a.click();
        URL.revokeObjectURL(url);
        a.remove();
    }

    function getCode() { return document.getElementById('previewBox').textContent; }

    function copyCode() {
        const code = getCode();
        if (!code) return;
        navigator.clipboard.writeText(code).then(() => showToast());
    }

    function showToast() {
        const t = document.getElementById('toast');
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 2200);
    }

    loadState();
    updateStorageUI();
    if (!choices.storageType) {
        choices.storageType = 'local';
        selectCard(document.querySelector('.option-card[data-name="storageType"][data-val="local"]'));
    }
</script>

</body>
</html>
