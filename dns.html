<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Помощник по настройке DNS</title>
    <link rel="icon" href="img/dns.png" type="image/svg+xml" id="favicon">
    <style>
        /* --- Общие стили --- */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code&display=swap');

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        /* --- Контейнер и карточки --- */
        .container {
            max-width: 800px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #1a202c;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #718096;
            margin-top: 0;
            margin-bottom: 40px;
        }

        .card {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
        }
        
        .card.info-card {
            background-color: #e3f2fd; /* Светло-голубой фон для инфо-карты */
            border-left: 5px solid #4299e1;
        }

        .card h2 {
            margin-top: 0;
            color: #2d3748;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.25rem;
        }
        
        .card h3 {
            color: #4a5568;
            margin-top: 25px;
            margin-bottom: 10px;
        }

        .card p {
            color: #718096;
            line-height: 1.6;
            margin-top: 5px;
        }

        /* --- Элементы для копирования --- */
        .copyable {
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            user-select: none; /* Запрещаем выделение текста мышью */
        }
        
        .copyable:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .copyable:active {
            transform: translateY(0);
            box-shadow: none;
        }

        /* --- Стиль для кода (ИЗМЕНЕНО) --- */
        pre.code-block {
            background-color: #012456; /* Синий фон в стиле PowerShell */
            color: #FFFFFF;             /* Белый текст */
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Fira Code', 'Courier New', Courier, monospace;
            font-size: 0.95em;
        }

        /* --- Стиль для встроенного кода (клавиши, названия) --- */
        code {
            background-color: #e2e8f0;
            color: #4a5568;
            padding: 3px 6px;
            border-radius: 4px;
            font-family: 'Fira Code', 'Courier New', Courier, monospace;
            font-size: 0.9em;
        }
        
        pre code { /* Сброс стилей для кода внутри pre */
            background: none;
            padding: 0;
            border-radius: 0;
            color: inherit; /* Наследуем белый цвет от родителя pre */
        }

        /* --- Стиль для DNS адресов --- */
        .dns-addresses {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .dns-badge {
            background-color: #4299e1; /* Синий */
            color: white;
            padding: 10px 18px;
            border-radius: 20px;
            font-weight: 500;
            font-size: 1rem;
        }
        
        .dns-badge.green {
            background-color: #48bb78; /* Зеленый */
        }

        /* --- Стиль для инструкции --- */
        .instruction-list {
            list-style-type: decimal;
            padding-left: 25px;
            color: #4a5568;
        }
        .instruction-list li {
            margin-bottom: 12px;
            padding-left: 5px;
            line-height: 1.6;
        }
        .instruction-list strong {
            color: #2d3748;
        }

        /* --- Уведомление о копировании --- */
        #copy-notification {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #2d3748;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, bottom 0.3s ease;
        }
        
        #copy-notification.show {
            opacity: 1;
            visibility: visible;
            bottom: 40px;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>Помощник по настройке DNS</h1>
        <p class="subtitle">Удобный сборник команд для управления DNS в Windows.</p>

        <!-- Блок 0: Инструкция по запуску PowerShell -->
        <div class="card info-card">
            <h2>Как запустить PowerShell от имени Администратора</h2>
            <p>Все команды на этой странице требуют прав администратора. Выберите любой удобный способ:</p>
            
            <h3>Способ 1: Через меню «Пуск» (самый простой)</h3>
            <ol class="instruction-list">
                <li>Нажмите клавишу <code>Win</code> (с логотипом Windows) или откройте меню «Пуск».</li>
                <li>Начните печатать <code>PowerShell</code>.</li>
                <li>В результатах поиска нажмите правой кнопкой мыши на "Windows PowerShell" и выберите <strong>"Запуск от имени администратора"</strong>.</li>
            </ol>

            <h3>Способ 2: Через меню опытного пользователя (самый быстрый)</h3>
             <ol class="instruction-list">
                <li>Нажмите сочетание клавиш <code>Win + X</code>.</li>
                <li>В появившемся меню выберите <strong>"Терминал Windows (Администратор)"</strong> или <strong>"Windows PowerShell (Администратор)"</strong>.</li>
            </ol>
            
            <h3>Способ 3: Через окно "Выполнить"</h3>
             <ol class="instruction-list">
                <li>Нажмите <code>Win + R</code>, чтобы открыть окно "Выполнить".</li>
                <li>Введите <code>powershell</code>.</li>
                <li>Теперь, не нажимая "OK", зажмите клавиши <code>Ctrl + Shift</code> и нажмите <code>Enter</code>.</li>
            </ol>
        </div>

        <!-- Блок 1: Основные команды PowerShell -->
        <div class="card">
            <h2>Основные команды PowerShell</h2>
            
            <h3>Просмотр текущих DNS-серверов</h3>
            <p>Показывает, какие DNS используются для каждого сетевого подключения.</p>
            <pre class="code-block copyable" data-copy='Get-DnsClient | Select-Object InterfaceAlias, ServerAddresses'><code>Get-DnsClient | Select-Object InterfaceAlias, ServerAddresses</code></pre>
            
            <h3>Сброс кэша DNS</h3>
            <p>Очищает локальный кэш DNS. Полезно, если сайты открываются неправильно после смены DNS.</p>
            <pre class="code-block copyable" data-copy="Clear-DnsClientCache"><code>Clear-DnsClientCache</code></pre>

            <h3>Удаление всех DNS (возврат к автоматическим)</h3>
            <p>Сбрасывает настройки DNS для указанного адаптера на "Получать автоматически" (по DHCP).</p>
            <pre class="code-block copyable" data-copy='Set-DnsClientServerAddress -InterfaceAlias "Ethernet 4" -ResetServerAddresses'><code>Set-DnsClientServerAddress -InterfaceAlias "Ethernet 4" -ResetServerAddresses</code></pre>
            <p><strong>Примечание:</strong> Возможно, вам потребуется заменить <code>"Ethernet 4"</code> на имя вашего подключения (например, <code>"Ethernet"</code> или <code>"Wi-Fi"</code>).</p>
        </div>

        <!-- Блок 2: Установка Xbox DNS -->
        <div class="card">
            <h2>Установка Xbox DNS</h2>
            <h3>Команда для PowerShell</h3>
            <pre class="code-block copyable" data-copy='Set-DnsClientServerAddress -InterfaceAlias "Ethernet 4" -ServerAddresses ("176.99.11.77", "80.78.247.254")'><code>Set-DnsClientServerAddress -InterfaceAlias "Ethernet 4" -ServerAddresses ("176.99.11.77", "80.78.247.254")</code></pre>
            <h3>DNS-адреса для ручной настройки</h3>
            <div class="dns-addresses">
                <div class="dns-badge copyable" data-copy="176.99.11.77">176.99.11.77</div>
                <div class="dns-badge copyable" data-copy="80.78.247.254">80.78.247.254</div>
            </div>
        </div>
        
        <!-- Блок 3: Установка DNS Google (Альтернатива) -->
        <div class="card">
            <h2>Установка Google DNS (Альтернатива)</h2>
            <h3>Команда для PowerShell</h3>
            <pre class="code-block copyable" data-copy='Set-DnsClientServerAddress -InterfaceAlias "Ethernet 4" -ServerAddresses ("8.8.8.8", "8.8.4.4")'><code>Set-DnsClientServerAddress -InterfaceAlias "Ethernet 4" -ServerAddresses ("8.8.8.8", "8.8.4.4")</code></pre>
            <h3>DNS-адреса для ручной настройки</h3>
            <div class="dns-addresses">
                <div class="dns-badge green copyable" data-copy="8.8.8.8">8.8.8.8</div>
                <div class="dns-badge green copyable" data-copy="8.8.4.4">8.8.4.4</div>
            </div>
        </div>

        <!-- Блок 4: Настройка в браузере -->
        <div class="card">
            <h2>Настройка безопасного DNS в браузере</h2>
            <p>Технология "Безопасный DNS" (DNS-over-HTTPS) шифрует ваши DNS-запросы, повышая приватность. Нажмите на ссылку ниже, чтобы скопировать её.</p>
            <div class="dns-addresses" style="margin-bottom: 25px;">
                 <div class="dns-badge copyable" data-copy="https://xbox-dns.ru/dns-query">https://xbox-dns.ru/dns-query</div>
            </div>
            
            <h3>Инструкция для Chrome / Яндекс.Браузера</h3>
            <ol class="instruction-list">
                <li>Откройте <strong>Настройки</strong> вашего браузера.</li>
                <li>Перейдите в раздел <strong>"Безопасность"</strong> (или "Конфиденциальность и безопасность").</li>
                <li>Найдите пункт <strong>"Использовать безопасный DNS-сервер"</strong>.</li>
                <li>Выберите опцию <strong>"С помощью..."</strong> или "Настраиваемый".</li>
                <li>В появившееся поле вставьте скопированную ссылку.</li>
            </ol>
        </div>
    </div>

    <!-- Элемент для уведомлений -->
    <div id="copy-notification">Скопировано!</div>

    <script>
        // Функция для показа уведомления
        function showNotification(message) {
            const notification = document.getElementById('copy-notification');
            notification.textContent = message;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 2000);
        }

        // Функция для копирования текста
        async function copyTextToClipboard(text) {
            if (!navigator.clipboard) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showNotification('Скопировано в буфер обмена!');
                } catch (err) {
                    console.error('Ошибка копирования: ', err);
                    showNotification('Ошибка при копировании!');
                }
                document.body.removeChild(textArea);
                return;
            }
            try {
                await navigator.clipboard.writeText(text);
                showNotification('Скопировано в буфер обмена!');
            } catch (err) {
                console.error('Ошибка копирования: ', err);
                showNotification('Ошибка при копировании!');
            }
        }
        
        document.querySelectorAll('.copyable').forEach(element => {
            element.addEventListener('click', (event) => {
                event.preventDefault();
                const textToCopy = element.dataset.copy;
                copyTextToClipboard(textToCopy);
            });
        });
    </script>

</body>
</html>